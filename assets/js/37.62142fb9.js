(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{524:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("mysql安装方式")]),s._v(" "),t("h2",{attrs:{id:"_1-安装依赖包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖包"}},[s._v("#")]),s._v(" 1.安装依赖包")]),s._v(" "),t("p",[s._v("MySQL依赖于libaio 库。如果这个库没有在本地安装，数据目录初始化和后续的服务器启动步骤将会失败。请使用适当的软件包管理器进行安装。例如，在基于Yum的系统上：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("yum search libaio\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("注意\nSLES 11：从MySQL 5.7.19开始，Linux通用tar包的格式是EL6而不是EL5。以致于MySQL客户端bin / mysql需要libtinfo.so.5。\n解决方法是创建软链接，例如64位系统上的ln -s libncurses.so.5.6 /lib64/libtinfo.so.5或32 位系统上的ln -s libncurses.so.5.6 /lib/libtinfo.so.5。")]),s._v(" "),t("h2",{attrs:{id:"_2-创建一个mysql用户和组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建一个mysql用户和组"}},[s._v("#")]),s._v(" 2.创建一个mysql用户和组")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql -s /bin/false mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("注意\n此用户仅用于运行mysql服务，而不是登录，因此使用useradd -r和-s /bin/false命令选项来创建对服务器主机没有登录权限的用户。")]),s._v(" "),t("h2",{attrs:{id:"_3-解压到指定目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-解压到指定目录"}},[s._v("#")]),s._v(" 3.解压到指定目录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v("  mysql-5.7.26-linux-glibc2.12-x86_64    /usr/local/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s  mysql-5.7.26-linux-glibc2.12-x86_64 /usr/local/mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_4-配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置环境变量"}},[s._v("#")]),s._v(" 4.配置环境变量")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v("  /etc/profile.d/mysql.sh\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"export PATH='),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/usr/local/mysql/bin"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile.d/mysql.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_5-配置数据库目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置数据库目录"}},[s._v("#")]),s._v(" 5.配置数据库目录")]),s._v(" "),t("p",[s._v("数据目录：/data/mysqldb/"),t("br"),s._v("\n参数文件my.cnf：/etc/my.cnf"),t("br"),s._v("\n错误日志log-error：/data/dblogs/mysql_error.log"),t("br"),s._v("\n二进制日志log-bin：/data/dblogs/mysql_bin.log"),t("br"),s._v("\n慢查询日志slow_query_log_file：/data/dblogs/mysql_slow_query.log"),t("br"),s._v("\n套接字socket文件：/data/dbrun/mysql.sock"),t("br"),s._v("\npid文件：/data/dbrun/mysql.pid"),t("br"),s._v("\n创建目录：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mysqldb,dblogs,dbrun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /usr/local/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /data/mysqldb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /data/dbrun\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /data/dblogs\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("775")]),s._v(" /data/dbrun\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("775")]),s._v(" /data/dblogs\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("775")]),s._v(" /data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"_6-配置my-cnf文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-配置my-cnf文件"}},[s._v("#")]),s._v(" 6.配置my.cnf文件")]),s._v(" "),t("p",[s._v("在/etc/下创建my.cnf文件，加入如下参数，其他参数根据需要配置")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /etc/my.cnf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" mysql:mysql /etc/my.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("[client]\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("socket")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dbrun/mysql.sock")]),s._v("\n\n[mysqld]\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("socket")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dbrun/mysql.sock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("pid_file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dbrun/mysql.pid")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("datadir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/mysqldb/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("default_storage_engine")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("InnoDB")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("max_allowed_packet")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("128M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("max_connections")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("2048")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("open_files_limit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("65535")]),s._v("\nskip-name-resolve\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lower_case_table_names")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("character-set-server")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("utf8mb4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("collation-server")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("utf8mb4_unicode_ci")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("init_connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("'SET NAMES utf8mb4'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("innodb_buffer_pool_size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("128M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("innodb_log_file_size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("128M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("innodb_file_per_table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("innodb_flush_log_at_trx_commit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("key_buffer_size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("16M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("log-error")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dblogs/mysql_error.log")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("log-bin")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dblogs/mysql_bin.log")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("slow_query_log")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("slow_query_log_file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dblogs/mysql_slow_query.log")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("long_query_time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("tmp_table_size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("16M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("max_heap_table_size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("16M")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("server-id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("h2",{attrs:{id:"_7-初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-初始化"}},[s._v("#")]),s._v(" 7.初始化")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/usr/local/mysql/bin/mysqld --initialize --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/ --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/mysqldb/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'temporary password'")]),s._v(" /data/dblogs/mysql_error.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此时会生成一个临时密码，可以在mysql_error.log文件找到")]),s._v(" "),t("p",[s._v("生成ssl")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/usr/local/mysql/bin/mysql_ssl_rsa_setup --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/ --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/mysqldb/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_8-配置服务-使用systemctl管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-配置服务-使用systemctl管理"}},[s._v("#")]),s._v(" 8.配置服务，使用systemctl管理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/lib/systemd/system\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" mysqld.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("文件内容如下")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This program is free software; you can redistribute it and/or modify")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# it under the terms of the GNU General Public License as published by")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the Free Software Foundation; version 2 of the License.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This program is distributed in the hope that it will be useful,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# but WITHOUT ANY WARRANTY; without even the implied warranty of")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GNU General Public License for more details.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You should have received a copy of the GNU General Public License")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# along with this program; if not, write to the Free Software")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemd service file for MySQL forking server")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n[Unit]\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("MySQL Server")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("man:mysqld(8)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("http://dev.mysql.com/doc/refman/en/using-systemd.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("network.target")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("syslog.target")]),s._v("\n[Install]\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("multi-user.target")]),s._v("\n[Service]\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("forking")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PIDFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/data/dbrun/mysql.pid")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disable service start and stop timeout logic of systemd for mysqld service.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("TimeoutSec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Execute pre and post scripts as root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PermissionsStartOnly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Needed to create system tables")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ExecStartPre=/usr/bin/mysqld_pre_systemd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start main service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/usr/local/mysql/bin/mysqld --daemonize -u mysql --pid-file=/data/dbrun/mysql.pid $MYSQLD_OPTS")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use this to switch malloc implementation")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("EnvironmentFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("-/etc/sysconfig/mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Sets open_files_limit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("LimitNOFILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("65535")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("on-failure")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("RestartPreventExitStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("p",[s._v("让systemctl加载配置服务")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl daemon-reload\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld.service\nsystemctl is-enabled mysqld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_9-启动mysql服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-启动mysql服务"}},[s._v("#")]),s._v(" 9.启动MySQL服务")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl start mysqld.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_10-mysql用户初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-mysql用户初始化"}},[s._v("#")]),s._v(" 10.MySQL用户初始化")]),s._v(" "),t("p",[s._v("重置密码(上一步已经重置过了 这次可以忽略)\n删除匿名用户\n关闭root用户的远程登录\n删除测试数据库")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/usr/local/mysql/bin/mysql_secure_installation\n\n\nSecuring the MySQL server deployment.\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user root: \nThe existing password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the user account root has expired. Please "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" a new password.\nNew password: \nRe-enter new password: \n\nVALIDATE PASSWORD PLUGIN can be used to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" passwords\nand improve security. It checks the strength of password\nand allows the "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" only those passwords "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" are\nsecure enough. Would you like to setup VALIDATE PASSWORD plugin?\n\nPress y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No: Y\n\nThere are three levels of password validation policy:\n\nLOW    Length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nMEDIUM Length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, and special characters\nSTRONG Length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, special characters and dictionary                  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n\nPlease enter "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" LOW, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MEDIUM and "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" STRONG: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nUsing existing password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root.\n\nEstimated strength of the password: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" \nChange the password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root ? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("Press y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" N\n\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". skipping.\nBy default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" them. This is intended only "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("\ntesting, and to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" the installation go a bit smoother.\nYou should remove them before moving into a production\nenvironment.\n\nRemove anonymous users? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Y\nSuccess.\n\n\nNormally, root should only be allowed to connect from\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" This ensures that someone cannot guess at\nthe root password from the network.\n\nDisallow root login remotely? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Y\nSuccess.\n\nBy default, MySQL comes with a database named "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" that\nanyone can access. This is also intended only "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" testing,\nand should be removed before moving into a production\nenvironment.\n\n\nRemove "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database and access to it? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Y\n - Dropping "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSuccess.\n\n - Removing privileges on "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\nReload privilege tables now? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Y\nSuccess.\n\nAll done"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br")])]),t("h2",{attrs:{id:"_11-导入时区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-导入时区"}},[s._v("#")]),s._v(" 11.导入时区")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("/usr/local/mysql/bin/mysql_tzinfo_to_sql /usr/share/zoneinfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" /usr/local/mysql/bin/mysql -uroot -p mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_12-验证安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-验证安装"}},[s._v("#")]),s._v(" 12.验证安装")]),s._v(" "),t("p",[s._v("同步时间timezone")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("mysql_tzinfo_to_sql /usr/share/zoneinfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql -u root mysql -p\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_13-开区远程访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-开区远程访问"}},[s._v("#")]),s._v(" 13.开区远程访问")]),s._v(" "),t("p",[s._v("更改localhost账户密码")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ALTER "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysqladmindba'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user from mysql.user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate mysql.user "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" where "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nALTER "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysqladmindba'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);